# üóÑÔ∏è –®–∞–≥ 2: –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π —Å—Ö–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (10 —Ç–∞–±–ª–∏—Ü)

## üìã –û–±–∑–æ—Ä

–ù–∞ –¥–∞–Ω–Ω–æ–º —à–∞–≥–µ –º—ã **–ø–µ—Ä–µ—Å–º–æ—Ç—Ä–µ–ª–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É** –∏ —Å–æ–∑–¥–∞–ª–∏ **–ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é —Å—Ö–µ–º—É** –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∞–±–ª–∏—Ü. –ù–æ–≤–∞—è —Å—Ö–µ–º–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- ‚úÖ **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö** - —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π
- ‚úÖ **–ü–æ–ª–Ω—É—é –±–∏–∑–Ω–µ—Å-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** - –∫–æ—Ä–∑–∏–Ω–∞, –∑–∞–∫–∞–∑—ã, –æ—Ç–∑—ã–≤—ã, —Å–ø–∏—Å–∫–∏ –∂–µ–ª–∞–Ω–∏–π
- ‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –∏ foreign key —Å–≤—è–∑–∏
- ‚úÖ **–¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö** - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –∫–∞—Å–∫–∞–¥–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

## ÔøΩÔ∏è –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### üìã **–®–∞–≥ 2.1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ Sequelize**

```bash
# 1. –ü–µ—Ä–µ—Ö–æ–¥ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd lab_2_sequelize

# 2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ Node.js (–µ—Å–ª–∏ –Ω–µ —Å–æ–∑–¥–∞–Ω)
npm init -y

# 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Sequelize ORM –∏ PostgreSQL –¥—Ä–∞–π–≤–µ—Ä–∞
npm install sequelize pg pg-hstore

# 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Sequelize CLI –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π (–≥–ª–æ–±–∞–ª—å–Ω–æ –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ)
npm install --save-dev sequelize-cli

# 5. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã Sequelize
npx sequelize-cli init
```

**–ß—Ç–æ –¥–µ–ª–∞—é—Ç —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã:**

- `npm init -y` - —Å–æ–∑–¥–∞–µ—Ç package.json —Å –±–∞–∑–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- `sequelize` - –æ—Å–Ω–æ–≤–Ω–∞—è ORM –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- `pg` –∏ `pg-hstore` - –¥—Ä–∞–π–≤–µ—Ä—ã –¥–ª—è PostgreSQL –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ hstore/jsonb
- `sequelize-cli` - —É—Ç–∏–ª–∏—Ç–∞ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π, –º–æ–¥–µ–ª–µ–π, seeders
- `npx sequelize-cli init` - —Å–æ–∑–¥–∞–µ—Ç –ø–∞–ø–∫–∏: config, migrations, models, seeders

### üìã **–®–∞–≥ 2.2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL**

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
# Windows: —Å–∫–∞—á–∞—Ç—å —Å https://www.postgresql.org/download/windows/
# –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å psql –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

# 2. –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
psql -U postgres
CREATE USER bookstore_user WITH PASSWORD 'secure_password';
ALTER USER bookstore_user CREATEDB;
\q

# 3. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è postgres
# –í config.json —É–∫–∞–∑–∞—Ç—å username: "postgres" –∏ –≤–∞—à –ø–∞—Ä–æ–ª—å
```

**–ß—Ç–æ –¥–µ–ª–∞—é—Ç —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã:**

- `psql -U postgres` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL –ø–æ–¥ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- `CREATE USER` - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø–∞—Ä–æ–ª–µ–º –¥–ª—è –Ω–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `ALTER USER ... CREATEDB` - –¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–∞–≤–∞ —Å–æ–∑–¥–∞–≤–∞—Ç—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- `\q` - –≤—ã—Ö–æ–¥ –∏–∑ psql

### üìã **–®–∞–≥ 2.3: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î**

```bash
# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ config/config.json
```

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ config/config.json:**

```json
{
  "development": {
    "username": "bookstore_user",
    "password": "secure_password",
    "database": "bookstore_dev",
    "host": "127.0.0.1",
    "port": 5432,
    "dialect": "postgres",
    "logging": console.log
  },
  "test": {
    "username": "bookstore_user",
    "password": "secure_password",
    "database": "bookstore_test",
    "host": "127.0.0.1",
    "port": 5432,
    "dialect": "postgres",
    "logging": false
  },
  "production": {
    "username": "bookstore_user",
    "password": "secure_password",
    "database": "bookstore_prod",
    "host": "127.0.0.1",
    "port": 5432,
    "dialect": "postgres",
    "logging": false
  }
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**

- `username/password` - —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è PostgreSQL
- `database` - –∏–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- `host/port` - –∞–¥—Ä–µ—Å –∏ –ø–æ—Ä—Ç PostgreSQL —Å–µ—Ä–≤–µ—Ä–∞
- `dialect` - —Ç–∏–ø –ë–î (postgres, mysql, sqlite, mssql)
- `logging` - –≤–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è SQL –∑–∞–ø—Ä–æ—Å–æ–≤

### üìã **–®–∞–≥ 2.4: –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –¥–ª—è —Ç–∞–±–ª–∏—Ü**

```bash
# 1. –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã users
npx sequelize-cli migration:generate --name create-users

# 2. –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã books
npx sequelize-cli migration:generate --name create-books
```

**–ß—Ç–æ –¥–µ–ª–∞—é—Ç —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã:**

- –°–æ–∑–¥–∞—é—Ç —Ñ–∞–π–ª—ã –º–∏–≥—Ä–∞—Ü–∏–π –≤ –ø–∞–ø–∫–µ `migrations/` —Å timestamp
- –ö–∞–∂–¥—ã–π —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –º–µ—Ç–æ–¥—ã `up()` (–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ) –∏ `down()` (–æ—Ç–∫–∞—Ç)
- Timestamp –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π
- –ò–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤: `YYYYMMDDHHMMSS-create-users.js`

### üìã **–®–∞–≥ 2.5: –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏–¥–µ—Ä–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö**

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏–¥–µ—Ä–∞ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã books —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
npx sequelize-cli seed:generate --name demo-books
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–∞ –∫–æ–º–∞–Ω–¥–∞:**

- –°–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª –≤ –ø–∞–ø–∫–µ `seeders/` –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü –¥–∞–Ω–Ω—ã–º–∏
- –°–∏–¥–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –∏–ª–∏ –Ω–∞—á–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –§–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –º–µ—Ç–æ–¥—ã `up()` (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö) –∏ `down()` (—É–¥–∞–ª–µ–Ω–∏–µ)

### üìã **–®–∞–≥ 2.6: –°–æ–∑–¥–∞–Ω–∏–µ Sequelize –º–æ–¥–µ–ª–µ–π**

```bash
# 1. –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ User
npx sequelize-cli model:generate --name User --attributes email:string,password_hash:string,first_name:string,last_name:string,orders_history:jsonb

# 2. –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ Book
npx sequelize-cli model:generate --name Book --attributes title:string,author:string,genre:string,price:decimal,description:text,short_description:text,image:string,popularity:integer,stock:integer,metadata:jsonb
```

**–ß—Ç–æ –¥–µ–ª–∞—é—Ç —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã:**

- –°–æ–∑–¥–∞—é—Ç —Ñ–∞–π–ª—ã –º–æ–¥–µ–ª–µ–π –≤ –ø–∞–ø–∫–µ `models/`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –º–æ–¥–µ–ª–∏
- –°–æ–∑–¥–∞—é—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç)
- –ú–æ–¥–µ–ª–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

## üìä –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (10 —Ç–∞–±–ª–∏—Ü)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                                  –°–•–ï–ú–ê –ë–ê–ó–´ –î–ê–ù–ù–´–•                                     ‚îÇ
‚îÇ                              –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ     USERS       ‚îÇ     ‚îÇ   CATEGORIES    ‚îÇ     ‚îÇ   PUBLISHERS    ‚îÇ     ‚îÇ    AUTHORS      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§     ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§     ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§     ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ id (PK)         ‚îÇ     ‚îÇ id (PK)         ‚îÇ     ‚îÇ id (PK)         ‚îÇ     ‚îÇ id (PK)         ‚îÇ
‚îÇ first_name      ‚îÇ     ‚îÇ name            ‚îÇ     ‚îÇ name            ‚îÇ     ‚îÇ first_name      ‚îÇ
‚îÇ last_name       ‚îÇ     ‚îÇ slug            ‚îÇ     ‚îÇ country         ‚îÇ     ‚îÇ last_name       ‚îÇ
‚îÇ email (UNIQUE)  ‚îÇ     ‚îÇ description     ‚îÇ     ‚îÇ website         ‚îÇ     ‚îÇ middle_name     ‚îÇ
‚îÇ password_hash   ‚îÇ     ‚îÇ parent_id (FK)  ‚îÇ ‚Üê‚îÄ‚îê ‚îÇ email           ‚îÇ     ‚îÇ birth_date      ‚îÇ
‚îÇ phone           ‚îÇ     ‚îÇ is_active       ‚îÇ   ‚îÇ ‚îÇ phone           ‚îÇ     ‚îÇ death_date      ‚îÇ
‚îÇ role            ‚îÇ     ‚îÇ sort_order      ‚îÇ   ‚îÇ ‚îÇ address         ‚îÇ     ‚îÇ nationality     ‚îÇ
‚îÇ created_at      ‚îÇ     ‚îÇ created_at      ‚îÇ   ‚îÇ ‚îÇ founded_year    ‚îÇ     ‚îÇ biography       ‚îÇ
‚îÇ updated_at      ‚îÇ     ‚îÇ updated_at      ‚îÇ   ‚îÇ ‚îÇ created_at      ‚îÇ     ‚îÇ created_at      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ ‚îÇ updated_at      ‚îÇ     ‚îÇ updated_at      ‚îÇ
         ‚îÇ                        ‚îÇ           ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                        ‚îÇ           ‚îÇ                                   ‚îÇ
         ‚îÇ                        ‚îÇ           ‚îî‚îÄ parent_id —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ id        ‚îÇ
         ‚îÇ                        ‚îÇ                        (–∏–µ—Ä–∞—Ä—Ö–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π)   ‚îÇ
         ‚îÇ                        ‚îÇ                                               ‚îÇ
         ‚ñº                        ‚ñº                                               ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ     ORDERS      ‚îÇ     ‚îÇ                         BOOKS                                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§     ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ id (PK)         ‚îÇ     ‚îÇ id (PK)              ‚îÇ category_id (FK) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ user_id (FK) ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚ñ∫  ‚îÇ title                ‚îÇ publisher_id (FK) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ ‚îÇ
‚îÇ order_number    ‚îÇ     ‚îÇ description          ‚îÇ isbn                              ‚îÇ   ‚îÇ ‚îÇ
‚îÇ total_amount    ‚îÇ     ‚îÇ price                ‚îÇ pages                             ‚îÇ   ‚îÇ ‚îÇ
‚îÇ status          ‚îÇ     ‚îÇ stock                ‚îÇ language                          ‚îÇ   ‚îÇ ‚îÇ
‚îÇ created_at      ‚îÇ     ‚îÇ popularity           ‚îÇ publication_year                  ‚îÇ   ‚îÇ ‚îÇ
‚îÇ updated_at      ‚îÇ     ‚îÇ created_at           ‚îÇ edition                           ‚îÇ   ‚îÇ ‚îÇ
‚îÇ shipped_at      ‚îÇ     ‚îÇ updated_at           ‚îÇ weight                            ‚îÇ   ‚îÇ ‚îÇ
‚îÇ delivered_at    ‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îò
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                    ‚îÇ                          ‚îÇ   ‚îÇ
         ‚îÇ                                             ‚îÇ                          ‚îÇ   ‚îÇ
         ‚ñº                                             ‚ñº                          ‚îÇ   ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                  ‚îÇ   ‚îÇ
‚îÇ   ORDER_ITEMS   ‚îÇ                         ‚îÇ  BOOK_AUTHORS   ‚îÇ                  ‚îÇ   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                         ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                  ‚îÇ   ‚îÇ
‚îÇ id (PK)         ‚îÇ                         ‚îÇ id (PK)         ‚îÇ                  ‚îÇ   ‚îÇ
‚îÇ order_id (FK) ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ book_id (FK) ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ book_id (FK) ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ author_id (FK) ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ quantity        ‚îÇ                         ‚îÇ role            ‚îÇ
‚îÇ price_per_item  ‚îÇ                         ‚îÇ created_at      ‚îÇ
‚îÇ total_price     ‚îÇ                         ‚îÇ updated_at      ‚îÇ
‚îÇ created_at      ‚îÇ                         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ updated_at      ‚îÇ                                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                   ‚îÇ
                                                      ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    REVIEWS      ‚îÇ     ‚îÇ   CART_ITEMS    ‚îÇ     ‚îÇ   WISHLIST      ‚îÇ     ‚îÇ                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§     ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§     ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§     ‚îÇ   –°–í–Ø–ó–ò (FK):   ‚îÇ
‚îÇ id (PK)         ‚îÇ     ‚îÇ id (PK)         ‚îÇ     ‚îÇ id (PK)         ‚îÇ     ‚îÇ                 ‚îÇ
‚îÇ user_id (FK) ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚ñ∫  ‚îÇ user_id (FK) ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚ñ∫  ‚îÇ user_id (FK) ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚ñ∫  ‚îÇ FK = Foreign Key‚îÇ
‚îÇ book_id (FK) ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚ñ∫  ‚îÇ book_id (FK) ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚ñ∫  ‚îÇ book_id (FK) ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚ñ∫  ‚îÇ PK = Primary Key‚îÇ
‚îÇ rating          ‚îÇ     ‚îÇ quantity        ‚îÇ     ‚îÇ added_at        ‚îÇ     ‚îÇ                 ‚îÇ
‚îÇ title           ‚îÇ     ‚îÇ added_at        ‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ CASCADE DELETE: ‚îÇ
‚îÇ comment         ‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                             ‚îÇ ‚Ä¢ user ‚Üí orders ‚îÇ
‚îÇ is_verified     ‚îÇ                                                     ‚îÇ ‚Ä¢ order‚Üíitems  ‚îÇ
‚îÇ created_at      ‚îÇ                                                     ‚îÇ ‚Ä¢ user ‚Üí cart  ‚îÇ
‚îÇ updated_at      ‚îÇ                                                     ‚îÇ ‚Ä¢ user ‚Üí wish  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                                     ‚îÇ ‚Ä¢ user ‚Üí review‚îÇ
                                                                        ‚îÇ                 ‚îÇ
                                                                        ‚îÇ RESTRICT DELETE:‚îÇ
                                                                        ‚îÇ ‚Ä¢ category‚Üíbook‚îÇ
                                                                        ‚îÇ ‚Ä¢ publisher‚Üíbook‚îÇ
                                                                        ‚îÇ ‚Ä¢ book ‚Üí items ‚îÇ
                                                                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üìä –û–°–ù–û–í–ù–´–ï –°–í–Ø–ó–ò:

1. users (1) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ (N) orders         ‚îÇ –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –º–Ω–æ–≥–æ –∑–∞–∫–∞–∑–æ–≤
2. orders (1) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ (N) order_items    ‚îÇ –û–¥–∏–Ω –∑–∞–∫–∞–∑ ‚Üí –º–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–π
3. books (1) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ (N) order_items    ‚îÇ –û–¥–Ω–∞ –∫–Ω–∏–≥–∞ ‚Üí –º–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–π –∑–∞–∫–∞–∑–æ–≤
4. categories (1) ‚îÄ‚îÄ‚îÄ (N) books          ‚îÇ –û–¥–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è ‚Üí –º–Ω–æ–≥–æ –∫–Ω–∏–≥
5. publishers (1) ‚îÄ‚îÄ‚îÄ (N) books          ‚îÇ –û–¥–Ω–æ –∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ ‚Üí –º–Ω–æ–≥–æ –∫–Ω–∏–≥
6. books (N) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ (N) authors        ‚îÇ Many-to-Many —á–µ—Ä–µ–∑ book_authors
7. users (1) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ (N) reviews        ‚îÇ –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –º–Ω–æ–≥–æ –æ—Ç–∑—ã–≤–æ–≤
8. books (1) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ (N) reviews        ‚îÇ –û–¥–Ω–∞ –∫–Ω–∏–≥–∞ ‚Üí –º–Ω–æ–≥–æ –æ—Ç–∑—ã–≤–æ–≤
9. users (1) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ (N) cart_items     ‚îÇ –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –º–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–π –∫–æ—Ä–∑–∏–Ω—ã
10. users (1) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ (N) wishlist       ‚îÇ –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –º–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–π —Å–ø–∏—Å–∫–∞ –∂–µ–ª–∞–Ω–∏–π

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
```

## üìã –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—è—Ö –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è—Ö

### üîç **–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**

```sql
-- ‚ïê‚ïê‚ïê USERS (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏) ‚ïê‚ïê‚ïê
CREATE TABLE users (
    id SERIAL PRIMARY KEY,                    -- –ê–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç
    first_name VARCHAR(100) NOT NULL,         -- –ò–º—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)
    last_name VARCHAR(100) NOT NULL,          -- –§–∞–º–∏–ª–∏—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)
    email VARCHAR(255) UNIQUE NOT NULL,       -- Email (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
    password_hash VARCHAR(255) NOT NULL,      -- –•–µ—à –ø–∞—Ä–æ–ª—è
    phone VARCHAR(20),                        -- –¢–µ–ª–µ—Ñ–æ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    role VARCHAR(20) DEFAULT 'customer'       -- –†–æ–ª—å: customer|admin|manager
        CHECK (role IN ('customer', 'admin', 'manager')),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ‚ïê‚ïê‚ïê CATEGORIES (–ö–∞—Ç–µ–≥–æ—Ä–∏–∏) ‚ïê‚ïê‚ïê
CREATE TABLE categories (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) UNIQUE NOT NULL,        -- –ù–∞–∑–≤–∞–Ω–∏–µ (—É–Ω–∏–∫–∞–ª—å–Ω–æ–µ)
    slug VARCHAR(255) UNIQUE NOT NULL,        -- URL-slug (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
    description TEXT,                         -- –û–ø–∏—Å–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    parent_id INTEGER REFERENCES categories(id) -- –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è
        ON DELETE SET NULL,                   -- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ä–æ–¥–∏—Ç–µ–ª—è ‚Üí NULL
    is_active BOOLEAN DEFAULT true,           -- –ê–∫—Ç–∏–≤–Ω–∞ –ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è
    sort_order INTEGER DEFAULT 0,            -- –ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ‚ïê‚ïê‚ïê PUBLISHERS (–ò–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞) ‚ïê‚ïê‚ïê
CREATE TABLE publishers (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) UNIQUE NOT NULL,        -- –ù–∞–∑–≤–∞–Ω–∏–µ (—É–Ω–∏–∫–∞–ª—å–Ω–æ–µ)
    country VARCHAR(100),                     -- –°—Ç—Ä–∞–Ω–∞
    website VARCHAR(255),                     -- –í–µ–±-—Å–∞–π—Ç
    email VARCHAR(255),                       -- Email –∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞
    phone VARCHAR(20),                        -- –¢–µ–ª–µ—Ñ–æ–Ω
    address TEXT,                             -- –ê–¥—Ä–µ—Å
    founded_year INTEGER                      -- –ì–æ–¥ –æ—Å–Ω–æ–≤–∞–Ω–∏—è
        CHECK (founded_year > 1400 AND founded_year <= EXTRACT(YEAR FROM CURRENT_DATE)),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ‚ïê‚ïê‚ïê AUTHORS (–ê–≤—Ç–æ—Ä—ã) ‚ïê‚ïê‚ïê
CREATE TABLE authors (
    id SERIAL PRIMARY KEY,
    first_name VARCHAR(100) NOT NULL,         -- –ò–º—è –∞–≤—Ç–æ—Ä–∞
    last_name VARCHAR(100) NOT NULL,          -- –§–∞–º–∏–ª–∏—è –∞–≤—Ç–æ—Ä–∞
    middle_name VARCHAR(100),                 -- –û—Ç—á–µ—Å—Ç–≤–æ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    birth_date DATE,                          -- –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è
    death_date DATE,                          -- –î–∞—Ç–∞ —Å–º–µ—Ä—Ç–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    nationality VARCHAR(100),                 -- –ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
    biography TEXT,                           -- –ë–∏–æ–≥—Ä–∞—Ñ–∏—è –∞–≤—Ç–æ—Ä–∞
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT valid_dates CHECK (
        death_date IS NULL OR death_date > birth_date  -- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞—Ç
    )
);

-- ‚ïê‚ïê‚ïê BOOKS (–ö–Ω–∏–≥–∏) ‚ïê‚ïê‚ïê
CREATE TABLE books (
    id SERIAL PRIMARY KEY,
    title VARCHAR(500) NOT NULL,              -- –ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏
    description TEXT,                         -- –û–ø–∏—Å–∞–Ω–∏–µ –∫–Ω–∏–≥–∏
    isbn VARCHAR(20) UNIQUE,                  -- ISBN (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    price DECIMAL(10,2) NOT NULL             -- –¶–µ–Ω–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è)
        CHECK (price >= 0),                  -- –¶–µ–Ω–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π
    stock INTEGER NOT NULL DEFAULT 0         -- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å–∫–ª–∞–¥–µ
        CHECK (stock >= 0),                  -- –°–∫–ª–∞–¥ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º
    pages INTEGER CHECK (pages > 0),         -- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü
    language VARCHAR(50) DEFAULT 'ru',       -- –Ø–∑—ã–∫ –∫–Ω–∏–≥–∏
    publication_year INTEGER                 -- –ì–æ–¥ –∏–∑–¥–∞–Ω–∏—è
        CHECK (publication_year > 1400 AND publication_year <= EXTRACT(YEAR FROM CURRENT_DATE)),
    edition VARCHAR(100),                     -- –ò–∑–¥–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "2-–µ –∏–∑–¥–∞–Ω–∏–µ")
    weight DECIMAL(8,3),                      -- –í–µ—Å –∫–Ω–∏–≥–∏ –≤ –∫–≥
    popularity INTEGER DEFAULT 0,            -- –ü–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å (—Å—á–µ—Ç—á–∏–∫ –ø—Ä–æ–¥–∞–∂)
    category_id INTEGER REFERENCES categories(id) -- FK –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        ON DELETE RESTRICT NOT NULL,          -- –ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é —Å –∫–Ω–∏–≥–∞–º–∏
    publisher_id INTEGER REFERENCES publishers(id) -- FK –∫ –∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É
        ON DELETE RESTRICT NOT NULL,          -- –ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ —Å –∫–Ω–∏–≥–∞–º–∏
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ‚ïê‚ïê‚ïê BOOK_AUTHORS (–°–≤—è–∑—å –∫–Ω–∏–≥ –∏ –∞–≤—Ç–æ—Ä–æ–≤) ‚ïê‚ïê‚ïê
CREATE TABLE book_authors (
    id SERIAL PRIMARY KEY,
    book_id INTEGER REFERENCES books(id)     -- FK –∫ –∫–Ω–∏–≥–µ
        ON DELETE CASCADE NOT NULL,           -- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–Ω–∏–≥–∏ ‚Üí —É–¥–∞–ª–∏—Ç—å —Å–≤—è–∑—å
    author_id INTEGER REFERENCES authors(id) -- FK –∫ –∞–≤—Ç–æ—Ä—É
        ON DELETE CASCADE NOT NULL,           -- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∞–≤—Ç–æ—Ä–∞ ‚Üí —É–¥–∞–ª–∏—Ç—å —Å–≤—è–∑—å
    role VARCHAR(50) DEFAULT 'author'        -- –†–æ–ª—å: author|co-author|translator|editor
        CHECK (role IN ('author', 'co-author', 'translator', 'editor')),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(book_id, author_id, role)          -- –£–Ω–∏–∫–∞–ª—å–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è
);

-- ‚ïê‚ïê‚ïê ORDERS (–ó–∞–∫–∞–∑—ã) ‚ïê‚ïê‚ïê
CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id)     -- FK –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
        ON DELETE CASCADE NOT NULL,           -- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Üí —É–¥–∞–ª–∏—Ç—å –∑–∞–∫–∞–∑—ã
    order_number VARCHAR(50) UNIQUE NOT NULL, -- –ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞ (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
    total_amount DECIMAL(12,2) NOT NULL      -- –û–±—â–∞—è —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞
        CHECK (total_amount > 0),             -- –°—É–º–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–π
    status VARCHAR(20) DEFAULT 'pending'     -- –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞
        CHECK (status IN ('pending', 'confirmed', 'processing', 'shipped', 'delivered', 'cancelled')),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    shipped_at TIMESTAMP,                    -- –î–∞—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏
    delivered_at TIMESTAMP                   -- –î–∞—Ç–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
);

-- ‚ïê‚ïê‚ïê ORDER_ITEMS (–ü–æ–∑–∏—Ü–∏–∏ –∑–∞–∫–∞–∑–æ–≤) ‚ïê‚ïê‚ïê
CREATE TABLE order_items (
    id SERIAL PRIMARY KEY,
    order_id INTEGER REFERENCES orders(id)   -- FK –∫ –∑–∞–∫–∞–∑—É
        ON DELETE CASCADE NOT NULL,           -- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞ ‚Üí —É–¥–∞–ª–∏—Ç—å –ø–æ–∑–∏—Ü–∏–∏
    book_id INTEGER REFERENCES books(id)     -- FK –∫ –∫–Ω–∏–≥–µ
        ON DELETE RESTRICT NOT NULL,          -- –ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –∫–Ω–∏–≥—É —Å –∑–∞–∫–∞–∑–∞–º–∏
    quantity INTEGER NOT NULL                -- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–Ω–∏–≥
        CHECK (quantity > 0),                 -- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º
    price_per_item DECIMAL(10,2) NOT NULL   -- –¶–µ–Ω–∞ –∑–∞ –µ–¥–∏–Ω–∏—Ü—É
        CHECK (price_per_item >= 0),          -- –¶–µ–Ω–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π
    total_price DECIMAL(12,2) NOT NULL       -- –û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ–∑–∏—Ü–∏–∏
        CHECK (total_price >= 0),             -- –°—Ç–æ–∏–º–æ—Å—Ç—å –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(order_id, book_id)                 -- –û–¥–Ω–∞ –∫–Ω–∏–≥–∞ –≤ –∑–∞–∫–∞–∑–µ (–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å quantity)
);

-- ‚ïê‚ïê‚ïê REVIEWS (–û—Ç–∑—ã–≤—ã) ‚ïê‚ïê‚ïê
CREATE TABLE reviews (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id)     -- FK –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
        ON DELETE CASCADE NOT NULL,           -- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Üí —É–¥–∞–ª–∏—Ç—å –æ—Ç–∑—ã–≤—ã
    book_id INTEGER REFERENCES books(id)     -- FK –∫ –∫–Ω–∏–≥–µ
        ON DELETE CASCADE NOT NULL,           -- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–Ω–∏–≥–∏ ‚Üí —É–¥–∞–ª–∏—Ç—å –æ—Ç–∑—ã–≤—ã
    rating INTEGER NOT NULL                  -- –†–µ–π—Ç–∏–Ω–≥ –æ—Ç 1 –¥–æ 5
        CHECK (rating >= 1 AND rating <= 5),
    title VARCHAR(255),                       -- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –æ—Ç–∑—ã–≤–∞
    comment TEXT,                             -- –¢–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞
    is_verified_purchase BOOLEAN DEFAULT false, -- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω–∞—è –ø–æ–∫—É–ø–∫–∞
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(user_id, book_id)                  -- –û–¥–∏–Ω –æ—Ç–∑—ã–≤ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –∫–Ω–∏–≥—É
);

-- ‚ïê‚ïê‚ïê CART_ITEMS (–ö–æ—Ä–∑–∏–Ω–∞ –ø–æ–∫—É–ø–æ–∫) ‚ïê‚ïê‚ïê
CREATE TABLE cart_items (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id)     -- FK –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
        ON DELETE CASCADE NOT NULL,           -- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Üí –æ—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É
    book_id INTEGER REFERENCES books(id)     -- FK –∫ –∫–Ω–∏–≥–µ
        ON DELETE CASCADE NOT NULL,           -- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–Ω–∏–≥–∏ ‚Üí —É–¥–∞–ª–∏—Ç—å –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
    quantity INTEGER DEFAULT 1               -- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤ –∫–æ—Ä–∑–∏–Ω–µ
        CHECK (quantity > 0),                 -- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º
    added_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(user_id, book_id)                  -- –£–Ω–∏–∫–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –≤ –∫–æ—Ä–∑–∏–Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
);

-- ‚ïê‚ïê‚ïê WISHLIST (–°–ø–∏—Å–æ–∫ –∂–µ–ª–∞–Ω–∏–π) ‚ïê‚ïê‚ïê
CREATE TABLE wishlist (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id)     -- FK –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
        ON DELETE CASCADE NOT NULL,           -- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Üí –æ—á–∏—Å—Ç–∏—Ç—å —Å–ø–∏—Å–æ–∫
    book_id INTEGER REFERENCES books(id)     -- FK –∫ –∫–Ω–∏–≥–µ
        ON DELETE CASCADE NOT NULL,           -- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–Ω–∏–≥–∏ ‚Üí —É–¥–∞–ª–∏—Ç—å –∏–∑ —Å–ø–∏—Å–∫–∞
    added_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(user_id, book_id)                  -- –£–Ω–∏–∫–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –≤ —Å–ø–∏—Å–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
);
```

### üîë **–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Å—Ö–µ–º—ã:**

1. **–ö–∞—Å–∫–∞–¥–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (CASCADE)** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π:

   - –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Üí —É–¥–∞–ª—è—é—Ç—Å—è –µ–≥–æ –∑–∞–∫–∞–∑—ã, –æ—Ç–∑—ã–≤—ã, –∫–æ—Ä–∑–∏–Ω–∞, —Å–ø–∏—Å–æ–∫ –∂–µ–ª–∞–Ω–∏–π
   - –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞ ‚Üí —É–¥–∞–ª—è—é—Ç—Å—è –≤—Å–µ –µ–≥–æ –ø–æ–∑–∏—Ü–∏–∏
   - –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–Ω–∏–≥–∏ ‚Üí —É–¥–∞–ª—è—é—Ç—Å—è —Å–≤—è–∑–∏ —Å –∞–≤—Ç–æ—Ä–∞–º–∏, –æ—Ç–∑—ã–≤—ã, –ø–æ–∑–∏—Ü–∏–∏ –∫–æ—Ä–∑–∏–Ω—ã/—Å–ø–∏—Å–∫–∞

2. **–û–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (RESTRICT)** - –∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è:

   - –ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é, –µ—Å–ª–∏ –µ—Å—Ç—å –∫–Ω–∏–≥–∏ –≤ —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
   - –ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ, –µ—Å–ª–∏ –µ—Å—Ç—å –µ–≥–æ –∫–Ω–∏–≥–∏
   - –ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –∫–Ω–∏–≥—É, –µ—Å–ª–∏ –µ—Å—Ç—å –∑–∞–∫–∞–∑—ã —Å —ç—Ç–æ–π –∫–Ω–∏–≥–æ–π

3. **–ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (CHECK)** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:

   - –¶–µ–Ω—ã –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º–∏
   - –†–µ–π—Ç–∏–Ω–≥–∏ –æ—Ç 1 –¥–æ 5 –∑–≤–µ–∑–¥
   - –ì–æ–¥—ã –∏–∑–¥–∞–Ω–∏—è –≤ —Ä–∞–∑—É–º–Ω—ã—Ö –ø—Ä–µ–¥–µ–ª–∞—Ö
   - –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞

4. **–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (UNIQUE)** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è:
   - –û–¥–∏–Ω email –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –û–¥–∏–Ω ISBN –Ω–∞ –∫–Ω–∏–≥—É
   - –û–¥–∏–Ω –æ—Ç–∑—ã–≤ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –∫–Ω–∏–≥—É
   - –û–¥–Ω–∞ –ø–æ–∑–∏—Ü–∏—è –≤ –∫–æ—Ä–∑–∏–Ω–µ/—Å–ø–∏—Å–∫–µ –∂–µ–ª–∞–Ω–∏–π

### –ù–æ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è: –ü–æ–ª–Ω–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è (10 —Ç–∞–±–ª–∏—Ü)

–û—Ç–∫–∞–∑–∞–ª–∏—Å—å –æ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≤ 2 —Ç–∞–±–ª–∏—Ü—ã –∏ —Å–æ–∑–¥–∞–ª–∏ **–ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é —Å—Ö–µ–º—É**:

#### **–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã (5 —à—Ç—É–∫):**

1. **users** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å —Ä–æ–ª—è–º–∏ (customer, admin, manager)
2. **categories** - –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∫–Ω–∏–≥ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏–µ—Ä–∞—Ä—Ö–∏–∏
3. **publishers** - –∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞ —Å –∫–æ–Ω—Ç–∞–∫—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
4. **authors** - –∞–≤—Ç–æ—Ä—ã —Å –±–∏–æ–≥—Ä–∞—Ñ–∏–µ–π –∏ –¥–∞—Ç–∞–º–∏ –∂–∏–∑–Ω–∏
5. **books** - –∫–Ω–∏–≥–∏ —Å ISBN, —Å–≤—è–∑—è–º–∏ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –∏ –∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞–º–∏

#### **–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (5 —Ç–∞–±–ª–∏—Ü):**

6. **book_authors** - —Å–≤—è–∑—å –∫–Ω–∏–≥ –∏ –∞–≤—Ç–æ—Ä–æ–≤ (many-to-many)
7. **orders** - –∑–∞–∫–∞–∑—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏
8. **order_items** - –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫–∞–∑–æ–≤ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∏ —Ü–µ–Ω–∞–º–∏
9. **reviews** - –æ—Ç–∑—ã–≤—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ –∫–Ω–∏–≥–∏ (1-5 –∑–≤–µ–∑–¥)
10. **cart_items** - –∫–æ—Ä–∑–∏–Ω–∞ –ø–æ–∫—É–ø–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
11. **wishlist** - —Å–ø–∏—Å–æ–∫ –∂–µ–ª–∞–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üóÑÔ∏è –°—Ö–µ–º–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ 1: Users (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)

```sql
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    email VARCHAR(255) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    first_name VARCHAR(100),
    last_name VARCHAR(100),
    phone VARCHAR(20),
    address TEXT,
    role ENUM('customer', 'admin', 'manager') DEFAULT 'customer',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### –¢–∞–±–ª–∏—Ü–∞ 2: Categories (–ö–∞—Ç–µ–≥–æ—Ä–∏–∏)

```sql
CREATE TABLE categories (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100) UNIQUE NOT NULL,           -- "–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞", "–†–æ–º–∞–Ω—Ç–∏–∫–∞"
    slug VARCHAR(100) UNIQUE NOT NULL,           -- "fantasy", "romance"
    description TEXT,
    parent_id INTEGER REFERENCES categories(id), -- –î–ª—è –∏–µ—Ä–∞—Ä—Ö–∏–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
    is_active BOOLEAN DEFAULT true,
    sort_order INTEGER DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### –¢–∞–±–ª–∏—Ü–∞ 3: Publishers (–ò–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞)

```sql
CREATE TABLE publishers (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) UNIQUE NOT NULL,
    description TEXT,
    website VARCHAR(500),
    contact_email VARCHAR(255),
    founded_year INTEGER,
    country VARCHAR(100),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### –¢–∞–±–ª–∏—Ü–∞ 4: Authors (–ê–≤—Ç–æ—Ä—ã)

```sql
CREATE TABLE authors (
    id SERIAL PRIMARY KEY,
    first_name VARCHAR(100) NOT NULL,
    last_name VARCHAR(100) NOT NULL,
    biography TEXT,
    birth_date DATE,
    death_date DATE,
    nationality VARCHAR(100),
    website VARCHAR(500),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### –¢–∞–±–ª–∏—Ü–∞ 5: Books (–ö–Ω–∏–≥–∏)

```sql
CREATE TABLE books (
    id SERIAL PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    isbn VARCHAR(20) UNIQUE,                     -- –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –Ω–æ–º–µ—Ä
    publisher_id INTEGER REFERENCES publishers(id),
    category_id INTEGER REFERENCES categories(id) NOT NULL,
    price DECIMAL(10,2) NOT NULL,
    stock INTEGER DEFAULT 0,                     -- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å–∫–ª–∞–¥–µ
    description TEXT,
    short_description TEXT,
    image VARCHAR(255),
    pages INTEGER,
    publication_year INTEGER,
    popularity INTEGER DEFAULT 0,               -- –°—á–µ—Ç—á–∏–∫ –ø–æ–∫—É–ø–æ–∫
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### –¢–∞–±–ª–∏—Ü–∞ 6: Book_Authors (–°–≤—è–∑—å –∫–Ω–∏–≥ –∏ –∞–≤—Ç–æ—Ä–æ–≤)

```sql
CREATE TABLE book_authors (
    id SERIAL PRIMARY KEY,
    book_id INTEGER REFERENCES books(id) ON DELETE CASCADE,
    author_id INTEGER REFERENCES authors(id) ON DELETE CASCADE,
    role ENUM('main_author', 'co_author', 'translator', 'editor') DEFAULT 'main_author',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(book_id, author_id, role)            -- –£–Ω–∏–∫–∞–ª—å–Ω–∞—è —Å–≤—è–∑—å
);
```

### –¢–∞–±–ª–∏—Ü–∞ 7: Orders (–ó–∞–∫–∞–∑—ã)

```sql
CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id) ON DELETE RESTRICT NOT NULL,
    order_number VARCHAR(50) UNIQUE NOT NULL,
    status ENUM('pending', 'confirmed', 'processing', 'shipped', 'delivered', 'cancelled') DEFAULT 'pending',
    total_amount DECIMAL(10,2) NOT NULL,
    shipping_address TEXT,
    payment_method ENUM('cash', 'card', 'bank_transfer', 'online') DEFAULT 'cash',
    notes TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    shipped_at TIMESTAMP,
    delivered_at TIMESTAMP
);
```

### –¢–∞–±–ª–∏—Ü–∞ 8: Order_Items (–ü–æ–∑–∏—Ü–∏–∏ –∑–∞–∫–∞–∑–æ–≤)

```sql
CREATE TABLE order_items (
    id SERIAL PRIMARY KEY,
    order_id INTEGER REFERENCES orders(id) ON DELETE CASCADE NOT NULL,
    book_id INTEGER REFERENCES books(id) ON DELETE RESTRICT NOT NULL,
    quantity INTEGER NOT NULL CHECK (quantity > 0),
    price_per_item DECIMAL(10,2) NOT NULL,
    total_price DECIMAL(10,2) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(order_id, book_id)                   -- –û–¥–∏–Ω —Ç–æ–≤–∞—Ä –≤ –∑–∞–∫–∞–∑–µ
);
```

### –¢–∞–±–ª–∏—Ü–∞ 9: Reviews (–û—Ç–∑—ã–≤—ã)

```sql
CREATE TABLE reviews (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE NOT NULL,
    book_id INTEGER REFERENCES books(id) ON DELETE CASCADE NOT NULL,
    rating INTEGER NOT NULL CHECK (rating >= 1 AND rating <= 5),
    title VARCHAR(255),
    comment TEXT,
    is_verified_purchase BOOLEAN DEFAULT false,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(user_id, book_id)                    -- –û–¥–∏–Ω –æ—Ç–∑—ã–≤ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –∫–Ω–∏–≥—É
);
```

### –¢–∞–±–ª–∏—Ü–∞ 10: Cart_Items (–ö–æ—Ä–∑–∏–Ω–∞)

```sql
CREATE TABLE cart_items (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE NOT NULL,
    book_id INTEGER REFERENCES books(id) ON DELETE CASCADE NOT NULL,
    quantity INTEGER DEFAULT 1 CHECK (quantity > 0),
    added_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(user_id, book_id)                    -- –£–Ω–∏–∫–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –≤ –∫–æ—Ä–∑–∏–Ω–µ
);
```

### –¢–∞–±–ª–∏—Ü–∞ 11: Wishlist (–°–ø–∏—Å–æ–∫ –∂–µ–ª–∞–Ω–∏–π)

```sql
CREATE TABLE wishlist (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE NOT NULL,
    book_id INTEGER REFERENCES books(id) ON DELETE CASCADE NOT NULL,
    added_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(user_id, book_id)                    -- –£–Ω–∏–∫–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –≤ —Å–ø–∏—Å–∫–µ
);
```

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π —Å—Ö–µ–º—ã

### 1. **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**

- ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞–≤—Ç–æ—Ä–∞—Ö/–∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞—Ö
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ foreign key —Å–≤—è–∑–∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å
- ‚úÖ –ö–∞—Å–∫–∞–¥–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–∏ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ù–æ—Ä–º–∞–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—ã (1NF, 2NF, 3NF) —Å–æ–±–ª—é–¥–µ–Ω—ã

### 2. **–ì–∏–±–∫–æ—Å—Ç—å –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**

- üöÄ –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã—Ö –∞–≤—Ç–æ—Ä–æ–≤, –∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- üîÑ –ü—Ä–æ—Å—Ç–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–≤—è–∑–µ–π (–∫–Ω–∏–≥–∞ ‚Üî –∞–≤—Ç–æ—Ä, –∫–Ω–∏–≥–∞ ‚Üî –∫–∞—Ç–µ–≥–æ—Ä–∏—è)
- ÔøΩ –ö–∞–∂–¥–∞—è —Ç–∞–±–ª–∏—Ü–∞ –º–æ–∂–µ—Ç —Ä–∞—Å—Ç–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
- üèóÔ∏è –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏—è

### 3. **–ë–æ–≥–∞—Ç–∞—è –±–∏–∑–Ω–µ—Å-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**

- üìã **–ö–æ—Ä–∑–∏–Ω–∞ –ø–æ–∫—É–ø–æ–∫** - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏
- üìù **–°–∏—Å—Ç–µ–º–∞ –∑–∞–∫–∞–∑–æ–≤** - —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏ –∏ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π
- ‚≠ê **–û—Ç–∑—ã–≤—ã –∏ —Ä–µ–π—Ç–∏–Ω–≥–∏** - –ø–æ–≤—ã—à–µ–Ω–∏–µ –¥–æ–≤–µ—Ä–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤
- üíù **–°–ø–∏—Å–æ–∫ –∂–µ–ª–∞–Ω–∏–π** - —É–ª—É—á—à–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞
- üë• **–†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** - admin, manager, customer

### 4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞**

- ÔøΩ –ë–æ–≥–∞—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è SQL –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –æ—Ç—á–µ—Ç–æ–≤
- üîç –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –≤—Å–µ—Ö —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚ö° –ë—ã—Å—Ç—Ä—ã–µ JOIN –æ–ø–µ—Ä–∞—Ü–∏–∏ –º–µ–∂–¥—É —Å–≤—è–∑–∞–Ω–Ω—ã–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏
- üìà –õ–µ–≥–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ–¥–∞–∂, –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏, —Ä–µ–π—Ç–∏–Ω–≥–æ–≤

## üîó –°–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏

### **One-to-Many (1:N) —Å–≤—è–∑–∏:**

```sql
categories ‚Üí books          -- –û–¥–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è ‚Üí –º–Ω–æ–≥–æ –∫–Ω–∏–≥
publishers ‚Üí books          -- –û–¥–Ω–æ –∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ ‚Üí –º–Ω–æ–≥–æ –∫–Ω–∏–≥
users ‚Üí orders             -- –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –º–Ω–æ–≥–æ –∑–∞–∫–∞–∑–æ–≤
orders ‚Üí order_items       -- –û–¥–∏–Ω –∑–∞–∫–∞–∑ ‚Üí –º–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–π
users ‚Üí reviews            -- –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –º–Ω–æ–≥–æ –æ—Ç–∑—ã–≤–æ–≤
books ‚Üí reviews            -- –û–¥–Ω–∞ –∫–Ω–∏–≥–∞ ‚Üí –º–Ω–æ–≥–æ –æ—Ç–∑—ã–≤–æ–≤
users ‚Üí cart_items         -- –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –º–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–π –≤ –∫–æ—Ä–∑–∏–Ω–µ
users ‚Üí wishlist           -- –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –º–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–π –≤ —Å–ø–∏—Å–∫–µ –∂–µ–ª–∞–Ω–∏–π
```

### **Many-to-Many (N:M) —Å–≤—è–∑–∏:**

```sql
books ‚Üî authors            -- –ß–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É book_authors
                          -- (–∫–Ω–∏–≥–∞ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–æ–≤,
                          --  –∞–≤—Ç–æ—Ä –º–æ–∂–µ—Ç –Ω–∞–ø–∏—Å–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–Ω–∏–≥)
```

### **Self-Reference —Å–≤—è–∑–∏:**

```sql
categories ‚Üí categories    -- parent_id –¥–ª—è –∏–µ—Ä–∞—Ä—Ö–∏–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
                          -- (–•—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞ ‚Üí –†–æ–º–∞–Ω—Ç–∏–∫–∞)
```

## üéØ –†–µ—à–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–∑–∞–¥–∞—á

### **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–æ–º:**

```sql
-- –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–Ω–∏–≥–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
WITH RECURSIVE category_tree AS (
  SELECT id, name, parent_id FROM categories WHERE slug = 'fiction'
  UNION ALL
  SELECT c.id, c.name, c.parent_id
  FROM categories c
  JOIN category_tree ct ON c.parent_id = ct.id
)
SELECT b.title, b.price, a.first_name, a.last_name
FROM books b
JOIN book_authors ba ON b.id = ba.book_id
JOIN authors a ON ba.author_id = a.id
WHERE b.category_id IN (SELECT id FROM category_tree);
```

### **–°–∏—Å—Ç–µ–º–∞ –∑–∞–∫–∞–∑–æ–≤:**

```sql
-- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Å–∫–ª–∞–¥–∞
BEGIN;
-- 1. –°–æ–∑–¥–∞–µ–º –∑–∞–∫–∞–∑
INSERT INTO orders (user_id, order_number, total_amount)
VALUES (1, 'ORD-2024-001', 1500.00);

-- 2. –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏–∏ –∏ —É–º–µ–Ω—å—à–∞–µ–º —Å–∫–ª–∞–¥
INSERT INTO order_items (order_id, book_id, quantity, price_per_item, total_price)
SELECT 1, 5, 2, 750.00, 1500.00
WHERE (SELECT stock FROM books WHERE id = 5) >= 2;

UPDATE books SET stock = stock - 2, popularity = popularity + 2 WHERE id = 5;
COMMIT;
```

### **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã:**

```sql
-- –¢–æ–ø –∞–≤—Ç–æ—Ä–æ–≤ –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º
SELECT
    a.first_name, a.last_name,
    SUM(oi.quantity) as total_sold,
    SUM(oi.total_price) as total_revenue
FROM authors a
JOIN book_authors ba ON a.id = ba.author_id
JOIN books b ON ba.book_id = b.id
JOIN order_items oi ON b.id = oi.book_id
GROUP BY a.id, a.first_name, a.last_name
ORDER BY total_revenue DESC;

-- –°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥ –∫–Ω–∏–≥ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
SELECT
    c.name as category,
    AVG(r.rating) as avg_rating,
    COUNT(r.id) as reviews_count
FROM categories c
JOIN books b ON c.id = b.category_id
LEFT JOIN reviews r ON b.id = r.book_id
GROUP BY c.id, c.name
ORDER BY avg_rating DESC;
```

## üìà –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### **–û—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã (—Å–æ–∑–¥–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ –º–∏–≥—Ä–∞—Ü–∏—è—Ö):**

```sql
-- === USERS ===
CREATE UNIQUE INDEX users_email_unique_idx ON users(email);
CREATE INDEX users_role_idx ON users(role);
CREATE INDEX users_created_at_idx ON users(created_at);

-- === CATEGORIES ===
CREATE UNIQUE INDEX categories_name_unique_idx ON categories(name);
CREATE UNIQUE INDEX categories_slug_unique_idx ON categories(slug);
CREATE INDEX categories_parent_id_idx ON categories(parent_id);
CREATE INDEX categories_active_sort_idx ON categories(is_active, sort_order);

-- === PUBLISHERS ===
CREATE UNIQUE INDEX publishers_name_unique_idx ON publishers(name);
CREATE INDEX publishers_country_idx ON publishers(country);

-- === AUTHORS ===
CREATE INDEX authors_fullname_idx ON authors(last_name, first_name);
CREATE INDEX authors_nationality_idx ON authors(nationality);
CREATE INDEX authors_birth_date_idx ON authors(birth_date);

-- === BOOKS ===
CREATE UNIQUE INDEX books_isbn_unique_idx ON books(isbn) WHERE isbn IS NOT NULL;
CREATE INDEX books_title_idx ON books(title);
CREATE INDEX books_category_id_idx ON books(category_id);
CREATE INDEX books_publisher_id_idx ON books(publisher_id);
CREATE INDEX books_stock_idx ON books(stock);
CREATE INDEX books_popularity_idx ON books(popularity);
CREATE INDEX books_price_idx ON books(price);
CREATE INDEX books_publication_year_idx ON books(publication_year);
CREATE INDEX books_category_stock_idx ON books(category_id, stock); -- –°–æ—Å—Ç–∞–≤–Ω–æ–π

-- === BOOK_AUTHORS ===
CREATE UNIQUE INDEX book_authors_unique_idx ON book_authors(book_id, author_id, role);
CREATE INDEX book_authors_book_id_idx ON book_authors(book_id);
CREATE INDEX book_authors_author_id_idx ON book_authors(author_id);

-- === ORDERS ===
CREATE UNIQUE INDEX orders_order_number_unique_idx ON orders(order_number);
CREATE INDEX orders_user_id_idx ON orders(user_id);
CREATE INDEX orders_status_idx ON orders(status);
CREATE INDEX orders_created_at_idx ON orders(created_at);
CREATE INDEX orders_user_status_idx ON orders(user_id, status); -- –°–æ—Å—Ç–∞–≤–Ω–æ–π

-- === ORDER_ITEMS ===
CREATE INDEX order_items_order_id_idx ON order_items(order_id);
CREATE INDEX order_items_book_id_idx ON order_items(book_id);
CREATE INDEX order_items_book_quantity_idx ON order_items(book_id, quantity);
CREATE UNIQUE INDEX order_items_order_book_unique_idx ON order_items(order_id, book_id);

-- === REVIEWS ===
CREATE INDEX reviews_book_id_idx ON reviews(book_id);
CREATE INDEX reviews_user_id_idx ON reviews(user_id);
CREATE INDEX reviews_rating_idx ON reviews(rating);
CREATE INDEX reviews_book_rating_idx ON reviews(book_id, rating); -- –°–æ—Å—Ç–∞–≤–Ω–æ–π
CREATE INDEX reviews_verified_purchase_idx ON reviews(is_verified_purchase);
CREATE UNIQUE INDEX reviews_user_book_unique_idx ON reviews(user_id, book_id);

-- === CART_ITEMS ===
CREATE INDEX cart_items_user_id_idx ON cart_items(user_id);
CREATE INDEX cart_items_book_id_idx ON cart_items(book_id);
CREATE INDEX cart_items_added_at_idx ON cart_items(added_at);
CREATE UNIQUE INDEX cart_items_user_book_unique_idx ON cart_items(user_id, book_id);

-- === WISHLIST ===
CREATE INDEX wishlist_user_id_idx ON wishlist(user_id);
CREATE INDEX wishlist_book_id_idx ON wishlist(book_id);
CREATE INDEX wishlist_added_at_idx ON wishlist(added_at);
CREATE UNIQUE INDEX wishlist_user_book_unique_idx ON wishlist(user_id, book_id);
```

## üõ°Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ Race Conditions –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–∞—è –ø–æ–∫—É–ø–∫–∞ —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º–∏:**

```sql
BEGIN;

-- 1. –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–∏–≥—É –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–∑–∞—â–∏—Ç–∞ –æ—Ç race conditions)
SELECT id, stock, price
FROM books
WHERE id = $book_id
FOR UPDATE;

-- 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
IF stock >= $quantity THEN
  -- 3. –°–æ–∑–¥–∞–µ–º –∑–∞–∫–∞–∑
  INSERT INTO orders (user_id, order_number, total_amount, status)
  VALUES ($user_id, generate_order_number(), $total, 'pending')
  RETURNING id INTO $order_id;

  -- 4. –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –∑–∞–∫–∞–∑–∞
  INSERT INTO order_items (order_id, book_id, quantity, price_per_item, total_price)
  VALUES ($order_id, $book_id, $quantity, $price, $total);

  -- 5. –£–º–µ–Ω—å—à–∞–µ–º —Å–∫–ª–∞–¥ –∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å
  UPDATE books
  SET stock = stock - $quantity,
      popularity = popularity + $quantity,
      updated_at = CURRENT_TIMESTAMP
  WHERE id = $book_id;

  COMMIT;
ELSE
  ROLLBACK;
  RAISE EXCEPTION '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ —Å–∫–ª–∞–¥–µ';
END IF;
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö:**

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –≤—Å–µ –∑–∞–∫–∞–∑—ã –∏–º–µ—é—Ç –ø–æ–∑–∏—Ü–∏–∏
SELECT o.id, o.order_number
FROM orders o
LEFT JOIN order_items oi ON o.id = oi.order_id
WHERE oi.id IS NULL;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å—É–º–º –≤ –∑–∞–∫–∞–∑–µ
SELECT
    o.id,
    o.total_amount as order_total,
    SUM(oi.total_price) as items_total
FROM orders o
JOIN order_items oi ON o.id = oi.order_id
GROUP BY o.id, o.total_amount
HAVING o.total_amount != SUM(oi.total_price);
```

## üìù –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### **–ú–∏–≥—Ä–∞—Ü–∏–∏ (11 —Ñ–∞–π–ª–æ–≤):**

- ‚úÖ `20241014120001-create-users.js` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å —Ä–æ–ª—è–º–∏
- ‚úÖ `20241014120002-create-categories.js` - –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å –∏–µ—Ä–∞—Ä—Ö–∏–µ–π
- ‚úÖ `20241014120003-create-publishers.js` - –ò–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞
- ‚úÖ `20241014120004-create-authors.js` - –ê–≤—Ç–æ—Ä—ã —Å –±–∏–æ–≥—Ä–∞—Ñ–∏–µ–π
- ‚úÖ `20241014120005-create-books.js` - –ö–Ω–∏–≥–∏ —Å FK —Å–≤—è–∑—è–º–∏
- ‚úÖ `20241014120006-create-book-authors.js` - –°–≤—è–∑—å –∫–Ω–∏–≥ –∏ –∞–≤—Ç–æ—Ä–æ–≤
- ‚úÖ `20241014120007-create-orders.js` - –ó–∞–∫–∞–∑—ã —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏
- ‚úÖ `20241014120008-create-order-items.js` - –ü–æ–∑–∏—Ü–∏–∏ –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ `20241014120009-create-reviews.js` - –û—Ç–∑—ã–≤—ã –∏ —Ä–µ–π—Ç–∏–Ω–≥–∏
- ‚úÖ `20241014120010-create-cart-items.js` - –ö–æ—Ä–∑–∏–Ω–∞ –ø–æ–∫—É–ø–æ–∫
- ‚úÖ `20241014120011-create-wishlist.js` - –°–ø–∏—Å–æ–∫ –∂–µ–ª–∞–Ω–∏–π

### **–°–∏–¥–µ—Ä—ã (1 —Ñ–∞–π–ª):**

- ‚úÖ `20241014120001-demo-data.js` - –ü–æ–ª–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü

### **–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–∫–ª—é—á–∞—é—Ç:**

```javascript
// –û—Å–Ω–æ–≤–Ω—ã–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏:
5 –∫–∞—Ç–µ–≥–æ—Ä–∏–π     ‚Üí –≤–∫–ª—é—á–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—é (–•—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è ‚Üí –†–æ–º–∞–Ω—Ç–∏–∫–∞, –î—Ä–∞–º–∞, –§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞)
3 –∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞  ‚Üí –ê–°–¢, –≠–∫—Å–º–æ, –ê–∑–±—É–∫–∞-–ê—Ç—Ç–∏–∫—É—Å
6 –∞–≤—Ç–æ—Ä–æ–≤       ‚Üí —Ä—É—Å—Å–∫–∏–µ –∏ –∑–∞—Ä—É–±–µ–∂–Ω—ã–µ –∫–ª–∞—Å—Å–∏–∫–∏

// –ö–∞—Ç–∞–ª–æ–≥ –∫–Ω–∏–≥:
6 –∫–Ω–∏–≥          ‚Üí —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π (ISBN, –æ–ø–∏—Å–∞–Ω–∏—è, —Ü–µ–Ω—ã, —Å–∫–ª–∞–¥)
6 —Å–≤—è–∑–µ–π        ‚Üí –∫–Ω–∏–≥–∞ ‚Üî –∞–≤—Ç–æ—Ä

// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:
3 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  ‚Üí admin, manager, customer
2 –∑–∞–∫–∞–∑–∞        ‚Üí —Å —Ä–∞–∑–Ω—ã–º–∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏ (delivered, processing)
3 –ø–æ–∑–∏—Ü–∏–∏       ‚Üí –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–∫–∞–∑–æ–≤
2 –æ—Ç–∑—ã–≤–∞        ‚Üí —Å —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏ 5 –∑–≤–µ–∑–¥
2 –ø–æ–∑–∏—Ü–∏–∏       ‚Üí –≤ –∫–æ—Ä–∑–∏–Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
1 –ø–æ–∑–∏—Ü–∏—è       ‚Üí –≤ —Å–ø–∏—Å–∫–µ –∂–µ–ª–∞–Ω–∏–π (–∫–Ω–∏–≥–∞ –Ω–µ –≤ –Ω–∞–ª–∏—á–∏–∏)
```

## ÔøΩüöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ **–ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å—Ö–µ–º–∞ –ë–î —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞** (10 —Ç–∞–±–ª–∏—Ü)
2. ‚úÖ **11 –º–∏–≥—Ä–∞—Ü–∏–π —Å–æ–∑–¥–∞–Ω—ã** —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–æ—Ä—è–¥–∫–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
3. ‚úÖ **–°–∏–¥–µ—Ä —Å –ø–æ–ª–Ω—ã–º–∏ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏** –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω
4. ‚è≥ **–ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π** (—Å–æ–∑–¥–∞–Ω–∏–µ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü –≤ –ë–î)
5. ‚è≥ **–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏** (–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∏–¥–µ—Ä–∞)
6. ‚è≥ **–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö Sequelize –º–æ–¥–µ–ª–µ–π** (–¥–ª—è –≤—Å–µ—Ö 10 —Ç–∞–±–ª–∏—Ü)
7. ‚è≥ **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–π** –º–µ–∂–¥—É –º–æ–¥–µ–ª—è–º–∏

## üí° –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### üéØ **–ü–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å 2-—Ç–∞–±–ª–∏—á–Ω–æ–π —Å—Ö–µ–º–æ–π:**

| –ê—Å–ø–µ–∫—Ç                 | 2 —Ç–∞–±–ª–∏—Ü—ã (—Å—Ç–∞—Ä–æ–µ)                  | 10 —Ç–∞–±–ª–∏—Ü (–Ω–æ–≤–æ–µ)               |
| ---------------------- | ----------------------------------- | ------------------------------- |
| **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è**       | ‚ùå –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ—Ä–æ–≤/–∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤ | ‚úÖ –ü–æ–ª–Ω–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è          |
| **–¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å**        | ‚ö†Ô∏è JSONB –±–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª—è               | ‚úÖ Foreign Key –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è      |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | ‚ö†Ô∏è GIN –∏–Ω–¥–µ–∫—Å—ã –ø–æ JSONB             | ‚úÖ –û–±—ã—á–Ω—ã–µ B-tree –∏–Ω–¥–µ–∫—Å—ã       |
| **–ì–∏–±–∫–æ—Å—Ç—å**           | ‚ùå –°–ª–æ–∂–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É JSON   | ‚úÖ –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –ø–æ–ª—è/—Ç–∞–±–ª–∏—Ü—ã |
| **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**          | ‚ùå –°–ª–æ–∂–Ω—ã–µ JSON –∑–∞–ø—Ä–æ—Å—ã             | ‚úÖ –ü—Ä–æ—Å—Ç—ã–µ SQL JOIN             |
| **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**    | ‚ùå –ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã               | ‚úÖ –ù–µ–∑–∞–≤–∏—Å–∏–º–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ  |
| **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**   | ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è                     | ‚úÖ –ü–æ–ª–Ω—ã–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω      |

### ‚ö° **–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**

- ‚úÖ **–ö–æ—Ä–∑–∏–Ω–∞ –ø–æ–∫—É–ø–æ–∫** - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –∑–∞–∫–∞–∑–æ–≤** - –ø–æ–ª–Ω—ã–π workflow –æ—Ç —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ –¥–æ—Å—Ç–∞–≤–∫–∏
- ‚úÖ **–û—Ç–∑—ã–≤—ã –∏ —Ä–µ–π—Ç–∏–Ω–≥–∏** - —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –¥–æ–≤–µ—Ä–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤
- ‚úÖ **–°–ø–∏—Å–æ–∫ –∂–µ–ª–∞–Ω–∏–π** - —É–ª—É—á—à–µ–Ω–∏–µ UX
- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏** - admin, manager, customer
- ‚úÖ **–ò–µ—Ä–∞—Ä—Ö–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π** - –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∫–∞—Ç–∞–ª–æ–≥–∞
- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∞–º–∏** - –±–∏–æ–≥—Ä–∞—Ñ–∏–∏, –¥–∞—Ç—ã –∂–∏–∑–Ω–∏
- ‚úÖ **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞—Ö** - –∫–æ–Ω—Ç–∞–∫—Ç—ã, —Å—Ç—Ä–∞–Ω–∞

**–ü–µ—Ä–µ—Ö–æ–¥ –∫ –®–∞–≥—É 3: –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î** ‚û°Ô∏è
