# Сидер демонстрационных данных книг

**Файл:** `20251013144632-demo-books.js`  
**Тип:** Sequelize CLI Seeder  
**Дата создания:** 13 октября 2025 г., 14:46:32

## Описание

Этот сидер заполняет таблицу `books` демонстрационными данными для тестирования и разработки интернет-магазина книг. Содержит 6 разнообразных книг с различными характеристиками для проверки всех функций каталога, поиска, фильтрации и покупок.

## Набор демонстрационных книг

### 1. "Унесённые ветром" - Маргарет Митчелл

- **Жанр:** Романтика
- **Цена:** 900₽ (низкая ценовая категория)
- **Автор:** Зарубежный
- **Популярность:** 85 покупок
- **Наличие:** 15 экземпляров
- **Особенности:** Классическая зарубежная романтика

### 2. "Гроза" - Александр Островский

- **Жанр:** Драма
- **Цена:** 550₽ (низкая ценовая категория)
- **Автор:** Русский
- **Популярность:** 120 покупок (самая популярная)
- **Наличие:** 8 экземпляров
- **Особенности:** Русская классическая драматургия

### 3. "Море и звезды" - Алексей Бирюлин

- **Жанр:** Биография
- **Цена:** 1670₽ (высокая ценовая категория)
- **Автор:** Русский
- **Популярность:** 45 покупок
- **Наличие:** 12 экземпляров
- **Особенности:** Документальная проза

### 4. "Человек-амфибия" - Александр Беляев

- **Жанр:** Фантастика
- **Цена:** 1750₽ (высокая ценовая категория)
- **Автор:** Русский
- **Популярность:** 95 покупок
- **Наличие:** 20 экземпляров
- **Особенности:** Классическая советская фантастика

### 5. "Маленький принц" - Антуан де Сент-Экзюпери

- **Жанр:** Фантастика
- **Цена:** 890₽ (низкая ценовая категория)
- **Автор:** Зарубежный
- **Популярность:** 150 покупок (лидер продаж)
- **Наличие:** 25 экземпляров
- **Особенности:** Философская сказка, универсальная популярность

### 6. "Великий Гэтсби" - Фрэнсис Скотт Фицджеральд

- **Жанр:** Драма
- **Цена:** 1200₽ (высокая ценовая категория)
- **Автор:** Зарубежный
- **Популярность:** 78 покупок
- **Наличие:** 0 экземпляров (товар закончился)
- **Особенности:** Тестирование состояния "нет в наличии"

## Структура данных каждой записи

### Обязательные поля

```javascript
{
  title: "Название книги",
  author: "Имя автора",
  genre: "Жанр",
  price: 999.99,
  description: "Полное описание книги...",
  short_description: "Краткое описание...",
  image: "book1.jpg",
  popularity: 85,
  stock: 15,
  metadata: JSON.stringify({...}),
  created_at: new Date(),
  updated_at: new Date()
}
```

### Метаданные (metadata)

Каждая книга содержит структурированные метаданные в формате JSON:

```javascript
{
  categories: ["romance", "foreign", "price-low"],
  priceCategory: "low", // "low" или "high"
  authorType: "foreign", // "russian" или "foreign"
  isbn: "978-5-389-12345-1"
}
```

## Категоризация для тестирования

### По ценовым категориям

- **Низкая цена (low):** до 1000₽

  - "Унесённые ветром" (900₽)
  - "Гроза" (550₽)
  - "Маленький принц" (890₽)

- **Высокая цена (high):** от 1000₽
  - "Море и звезды" (1670₽)
  - "Человек-амфибия" (1750₽)
  - "Великий Гэтсби" (1200₽)

### По типу автора

- **Русские авторы:**

  - Александр Островский
  - Алексей Бирюлин
  - Александр Беляев

- **Зарубежные авторы:**
  - Маргарет Митчелл
  - Антуан де Сент-Экзюпери
  - Фрэнсис Скотт Фицджеральд

### По жанрам

- **Романтика:** 1 книга
- **Драма:** 2 книги
- **Биография:** 1 книга
- **Фантастика:** 2 книги

### По уровню популярности

1. "Маленький принц" - 150 покупок
2. "Гроза" - 120 покупок
3. "Человек-амфибия" - 95 покупок
4. "Унесённые ветром" - 85 покупок
5. "Великий Гэтсби" - 78 покупок
6. "Море и звезды" - 45 покупок

### По наличию

- **В наличии:** 5 книг (разное количество)
- **Нет в наличии:** 1 книга ("Великий Гэтсби")

## Функции для тестирования

### 1. Тестирование каталога

- **Отображение:** Все 6 книг с разными характеристиками
- **Поиск:** По названию, автору, описанию
- **Сортировка:** По популярности, цене, алфавиту

### 2. Тестирование фильтров

- **По жанру:** 4 различных жанра
- **По цене:** Диапазон от 550₽ до 1750₽
- **По наличию:** Включение/исключение товаров без остатка
- **По автору:** Русские и зарубежные писатели

### 3. Тестирование покупок

- **Доступные:** 5 книг с разным количеством
- **Недоступные:** 1 книга для тестирования ошибок
- **Популярность:** Увеличение рейтинга после покупки

### 4. Тестирование аналитики

- **Популярные книги:** Топ-5 по количеству покупок
- **Статистика жанров:** Распределение по категориям
- **Ценовая аналитика:** Средняя цена, диапазоны

### 5. Тестирование UI/UX

- **Карточки товаров:** Различные длины названий и описаний
- **Изображения:** Ссылки на файлы book1.jpg - book6.jpg
- **Состояния:** В наличии, заканчивается, нет в наличии

## Методы сидера

### `up()` - Добавление данных

```javascript
await queryInterface.bulkInsert("books", [массив_книг], {});
```

- Добавляет все 6 книг одной операцией
- Использует `bulkInsert` для эффективности
- Устанавливает текущую дату для временных меток

### `down()` - Очистка данных

```javascript
await queryInterface.bulkDelete("books", null, {});
```

- Удаляет все записи из таблицы `books`
- Используется для отката сидера
- Полная очистка таблицы

## ISBN коды

Каждая книга имеет уникальный ISBN в метаданных:

- "978-5-389-12345-1" - "Унесённые ветром"
- "978-5-389-12345-2" - "Гроза"
- "978-5-389-12345-3" - "Море и звезды"
- "978-5-389-12345-4" - "Человек-амфибия"
- "978-5-389-12345-5" - "Маленький принц"
- "978-5-389-12345-6" - "Великий Гэтсби"

## Изображения

Каждая книга связана с файлом изображения:

- `book1.jpg` до `book6.jpg`
- Файлы должны находиться в `public/img/`
- При отсутствии используется placeholder

## Команды управления сидером

### Применение сидера

```bash
npx sequelize-cli db:seed:all
```

### Применение конкретного сидера

```bash
npx sequelize-cli db:seed --seed 20251013144632-demo-books.js
```

### Откат всех сидеров

```bash
npx sequelize-cli db:seed:undo:all
```

### Откат конкретного сидера

```bash
npx sequelize-cli db:seed:undo --seed 20251013144632-demo-books.js
```

## Связь с разработкой

### Этапы использования

1. **Разработка:** Базовые данные для тестирования функций
2. **Тестирование:** Проверка всех сценариев использования
3. **Демонстрация:** Презентация возможностей системы
4. **Продакшн:** Замена на реальные данные

### Расширение данных

Для добавления новых книг:

1. Следовать структуре существующих записей
2. Обновить метаданные с правильными категориями
3. Добавить соответствующие изображения
4. Учесть баланс по жанрам и ценам

## Качество данных

### Реалистичность

- Реальные названия книг и авторы
- Корректные описания и жанры
- Разумные цены для книжного рынка
- Естественное распределение популярности

### Разнообразие

- ✅ Различные жанры (4 категории)
- ✅ Разные ценовые сегменты (2 категории)
- ✅ Русские и зарубежные авторы
- ✅ Разные уровни популярности
- ✅ Различное количество в наличии

### Покрытие тест-кейсов

- ✅ Товары в наличии
- ✅ Товары без остатка
- ✅ Высокие и низкие цены
- ✅ Популярные и редкие книги
- ✅ Различные жанры для фильтрации
- ✅ Короткие и длинные описания

## Применение в проекте

Этот сидер обеспечивает полноценную работу интернет-магазина с самого начала разработки, позволяя тестировать все функции без необходимости ручного добавления данных. Данные подобраны таким образом, чтобы покрыть максимальное количество пользовательских сценариев и граничных случаев.
